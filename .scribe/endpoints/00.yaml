name: '1. Autenticação'
description: |-

  APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

  O fluxo de autenticação funciona assim:
  1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
  2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
  3. Use o `access_token` no header Authorization para requisições autenticadas
  4. Quando o token expirar, use `/auth/refresh` para obter um novo
endpoints:
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/auth/otp/send
    metadata:
      custom: []
      groupName: '1. Autenticação'
      groupDescription: |-

        APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

        O fluxo de autenticação funciona assim:
        1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
        2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
        3. Use o `access_token` no header Authorization para requisições autenticadas
        4. Quando o token expirar, use `/auth/refresh` para obter um novo
      subgroup: ''
      subgroupDescription: ''
      title: 'Enviar OTP'
      description: |-
        Envia um código de verificação de 6 dígitos para o telefone informado via SMS.
        O código expira em 5 minutos e pode ser reenviado após 1 minuto.
      authenticated: false
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      phone:
        custom: []
        name: phone
        description: 'Número de telefone com DDD (sem código do país).'
        required: true
        example: '11999999999'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      phone: '11999999999'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "data": {
              "message": "Code sent successfully.",
              "expires_at": "2026-01-18T05:32:36Z",
              "code": "123456"
            },
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Código enviado com sucesso'
      -
        custom: []
        status: 422
        content: |-
          {
            "data": null,
            "meta": {"success": false},
            "errors": [{"code": "VALIDATION_ERROR", "message": "O campo phone é obrigatório"}]
          }
        headers: []
        description: 'Telefone inválido'
      -
        custom: []
        status: 429
        content: |-
          {
            "data": null,
            "meta": {"success": false},
            "errors": [{"code": "RATE_LIMIT", "message": "Aguarde 1 minuto para reenviar"}]
          }
        headers: []
        description: 'Rate limit (aguarde 1 minuto)'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/auth/otp/verify
    metadata:
      custom: []
      groupName: '1. Autenticação'
      groupDescription: |-

        APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

        O fluxo de autenticação funciona assim:
        1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
        2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
        3. Use o `access_token` no header Authorization para requisições autenticadas
        4. Quando o token expirar, use `/auth/refresh` para obter um novo
      subgroup: ''
      subgroupDescription: ''
      title: 'Verificar OTP e Autenticar'
      description: |-
        Valida o código OTP recebido por SMS e retorna os tokens de autenticação.
        Se o usuário não existir, uma nova conta será criada automaticamente.
      authenticated: false
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      phone:
        custom: []
        name: phone
        description: 'Número de telefone (mesmo usado no envio).'
        required: true
        example: '11999999999'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      code:
        custom: []
        name: code
        description: 'Código de 6 dígitos recebido por SMS.'
        required: true
        example: '123456'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      name:
        custom: []
        name: name
        description: 'se novo usuário Nome do usuário (obrigatório apenas para novos usuários).'
        required: true
        example: 'João Silva'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      referral_code:
        custom: []
        name: referral_code
        description: 'Código de indicação (opcional).'
        required: false
        example: BORA123
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
    cleanBodyParameters:
      phone: '11999999999'
      code: '123456'
      name: 'João Silva'
      referral_code: BORA123
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "data": {
              "user": {
                "id": "019bcf92-ecda-70a6-98ec-204362b9c61a",
                "phone": "+5511999999999",
                "name": "João Silva",
                "avatar": "https://cdn.example.com/avatar.jpg",
                "is_verified": true,
                "onboarding_completed": true,
                "primary_family_id": "019bcf92-ecde-718f-a588-27021c63eb59",
                "primary_city_id": "edbca93c-2f01-4e17-af0a-53b1ccb4bf90"
              },
              "tokens": {
                "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
                "refresh_token": "n6rowFjjp07kkFyJ5yKl4vJ4nUvqb6Ry...",
                "token_type": "bearer",
                "expires_in": 3600
              },
              "is_new_user": false
            },
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Usuário existente autenticado'
      -
        custom: []
        status: 201
        content: |-
          {
            "data": {
              "user": {
                "id": "019bcf92-ecda-70a6-98ec-204362b9c61a",
                "phone": "+5511999999999",
                "name": "João Silva",
                "avatar": null,
                "is_verified": true,
                "onboarding_completed": false,
                "primary_family_id": "019bcf92-ecde-718f-a588-27021c63eb59",
                "primary_city_id": null
              },
              "tokens": {
                "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
                "refresh_token": "n6rowFjjp07kkFyJ5yKl4vJ4nUvqb6Ry...",
                "token_type": "bearer",
                "expires_in": 3600
              },
              "is_new_user": true
            },
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Novo usuário criado'
      -
        custom: []
        status: 400
        content: |-
          {
            "data": null,
            "meta": {"success": false},
            "errors": [{"code": "OTP_EXPIRED", "message": "Código expirado. Solicite um novo."}]
          }
        headers: []
        description: 'Código expirado'
      -
        custom: []
        status: 401
        content: |-
          {
            "data": null,
            "meta": {"success": false, "attempts_remaining": 2},
            "errors": [{"code": "OTP_INVALID", "message": "Código incorreto"}]
          }
        headers: []
        description: 'Código inválido'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/auth/refresh
    metadata:
      custom: []
      groupName: '1. Autenticação'
      groupDescription: |-

        APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

        O fluxo de autenticação funciona assim:
        1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
        2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
        3. Use o `access_token` no header Authorization para requisições autenticadas
        4. Quando o token expirar, use `/auth/refresh` para obter um novo
      subgroup: ''
      subgroupDescription: ''
      title: 'Renovar Token'
      description: |-
        Gera um novo par de tokens (access + refresh) usando o refresh token atual.
        O refresh token antigo é invalidado após o uso (one-time use).
      authenticated: false
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      refresh_token:
        custom: []
        name: refresh_token
        description: 'O refresh token obtido no login.'
        required: true
        example: n6rowFjjp07kkFyJ5yKl4vJ4nUvqb6Ry...
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      refresh_token: n6rowFjjp07kkFyJ5yKl4vJ4nUvqb6Ry...
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "data": {
              "tokens": {
                "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
                "refresh_token": "novoRefreshToken123...",
                "token_type": "bearer",
                "expires_in": 3600
              }
            },
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Tokens renovados com sucesso'
      -
        custom: []
        status: 401
        content: |-
          {
            "data": null,
            "meta": {"success": false},
            "errors": [{"code": "INVALID_REFRESH_TOKEN", "message": "Token inválido ou expirado"}]
          }
        headers: []
        description: 'Refresh token inválido ou expirado'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/auth/logout
    metadata:
      custom: []
      groupName: '1. Autenticação'
      groupDescription: |-

        APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

        O fluxo de autenticação funciona assim:
        1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
        2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
        3. Use o `access_token` no header Authorization para requisições autenticadas
        4. Quando o token expirar, use `/auth/refresh` para obter um novo
      subgroup: ''
      subgroupDescription: ''
      title: Logout
      description: |-
        Revoga os tokens de acesso do usuário. Pode revogar apenas o dispositivo atual
        ou todos os dispositivos de uma vez.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      refresh_token:
        custom: []
        name: refresh_token
        description: 'O refresh token do dispositivo atual (opcional).'
        required: false
        example: n6rowFjjp07kkFyJ5yKl...
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      all_devices:
        custom: []
        name: all_devices
        description: 'Se true, revoga tokens de todos os dispositivos. Default: false.'
        required: false
        example: false
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      refresh_token: n6rowFjjp07kkFyJ5yKl...
      all_devices: false
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "data": {"message": "Logged out successfully"},
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Logout realizado'
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - GET
    uri: api/v1/auth/me
    metadata:
      custom: []
      groupName: '1. Autenticação'
      groupDescription: |-

        APIs para autenticação via OTP (One-Time Password) e gerenciamento de tokens JWT.

        O fluxo de autenticação funciona assim:
        1. Envie o telefone para `/auth/otp/send` - você receberá um código de 6 dígitos via SMS
        2. Verifique o código em `/auth/otp/verify` - você receberá os tokens de acesso
        3. Use o `access_token` no header Authorization para requisições autenticadas
        4. Quando o token expirar, use `/auth/refresh` para obter um novo
      subgroup: ''
      subgroupDescription: ''
      title: 'Dados do Usuário Logado'
      description: |-
        Retorna os dados completos do usuário autenticado, incluindo estatísticas
        de gamificação e informações da família principal.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "data": {
              "id": "019bcf92-ecda-70a6-98ec-204362b9c61a",
              "phone": "+5511999999999",
              "name": "João Silva",
              "avatar": "https://cdn.example.com/avatar.jpg",
              "email": "joao@email.com",
              "is_verified": true,
              "stats": {
                "xp": 500,
                "level": 2,
                "streak_days": 5
              },
              "primary_family": {
                "id": "019bcf92-ecde-718f-a588-27021c63eb59",
                "name": "Família Silva"
              },
              "created_at": "2026-01-15T10:00:00Z"
            },
            "meta": {"success": true},
            "errors": null
          }
        headers: []
        description: 'Dados retornados com sucesso'
      -
        custom: []
        status: 401
        content: |-
          {
            "data": null,
            "meta": {"success": false},
            "errors": [{"code": "UNAUTHENTICATED", "message": "Token inválido ou expirado"}]
          }
        headers: []
        description: 'Token inválido'
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
